<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <script src="../node_modules/web-component-tester/browser.js"></script>
  <script src="bundle.js"></script>
</head>

<body>
  <pie-control-panel></pie-control-panel>
  <script>

    suite('<pie-control-panel>', function() {
      
      test('clicking a mode triggers an envChanged event', function(done) {
        var el = document.querySelector('pie-control-panel');
        el.env = { mode: 'gather'};
        var input = el.querySelector('input[value="evaluate"]');
        el.addEventListener('envChanged', function(){
          done();
        });
        input.setAttribute('checked', true);
        input.dispatchEvent(new CustomEvent('change'));
      });
      
      test('choosing select option triggers an envChanged event', function(done) {
        var el = document.querySelector('pie-control-panel');
        el.env = { mode: 'gather'};
        var select = el.querySelector('select[name="colorContrast"]');
        select.value = 'white_on_black';
        el.addEventListener('envChanged', function(event){
          expect(event.target.env.accessibility).to.eql({colorContrast: 'white_on_black'});
          done();
        });
        select.dispatchEvent(new CustomEvent('change'));
      });
    });
  </script>
</body>

</html>